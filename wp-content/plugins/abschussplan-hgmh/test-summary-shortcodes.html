<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Summary Shortcodes - Abschussplan HGMH</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container my-5">
    <h1>Test Summary Shortcodes - Abschussplan HGMH</h1>
    
    <div class="alert alert-info">
        <h4>Testing verschiedener [abschuss_summary] Shortcode-Varianten</h4>
        <p>Diese Seite dient zum Testen der flexiblen Parameter-Logik des [abschuss_summary] Shortcodes.</p>
    </div>

    <div class="row">
        <!-- Test 1: Keine Parameter - Gesamte Hegegemeinschaft -->
        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5>Test 1: Gesamte Hegegemeinschaft</h5>
                    <code>[abschuss_summary]</code>
                </div>
                <div class="card-body">
                    <p><strong>Erwartung:</strong> Zeigt Gesamtstatistiken aller Wildarten und Meldegruppen</p>
                    <p><strong>Verhalten:</strong> Aggregiert alle Daten über Species und Meldegruppen hinweg</p>
                    <!-- Hier würde WordPress den Shortcode rendern -->
                    <div class="text-muted">→ WordPress Shortcode Output hier</div>
                </div>
            </div>
        </div>

        <!-- Test 2: Nur Species Parameter -->
        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5>Test 2: Nur Rotwild (alle Meldegruppen)</h5>
                    <code>[abschuss_summary species="Rotwild"]</code>
                </div>
                <div class="card-body">
                    <p><strong>Erwartung:</strong> Zeigt nur Rotwild-Statistiken aggregiert über alle Meldegruppen</p>
                    <p><strong>Verhalten:</strong> Species-spezifische Kategorien, Limits und Counts</p>
                    <!-- Hier würde WordPress den Shortcode rendern -->
                    <div class="text-muted">→ WordPress Shortcode Output hier</div>
                </div>
            </div>
        </div>

        <!-- Test 3: Nur Meldegruppe Parameter -->
        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5>Test 3: Nur Gruppe_A (alle Wildarten)</h5>
                    <code>[abschuss_summary meldegruppe="Gruppe_A"]</code>
                </div>
                <div class="card-body">
                    <p><strong>Erwartung:</strong> Zeigt nur Gruppe_A-Statistiken aggregiert über alle Wildarten</p>
                    <p><strong>Verhalten:</strong> Meldegruppen-spezifische Aggregation</p>
                    <!-- Hier würde WordPress den Shortcode rendern -->
                    <div class="text-muted">→ WordPress Shortcode Output hier</div>
                </div>
            </div>
        </div>

        <!-- Test 4: Beide Parameter -->
        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5>Test 4: Rotwild + Gruppe_A</h5>
                    <code>[abschuss_summary species="Rotwild" meldegruppe="Gruppe_A"]</code>
                </div>
                <div class="card-body">
                    <p><strong>Erwartung:</strong> Zeigt spezifische Kombination Rotwild + Gruppe_A</p>
                    <p><strong>Verhalten:</strong> Engste Filterung, nur diese Kombination</p>
                    <!-- Hier würde WordPress den Shortcode rendern -->
                    <div class="text-muted">→ WordPress Shortcode Output hier</div>
                </div>
            </div>
        </div>

        <!-- Test 5: Ungültige Species -->
        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5>Test 5: Ungültige Wildart</h5>
                    <code>[abschuss_summary species="Unbekannt"]</code>
                </div>
                <div class="card-body">
                    <p><strong>Erwartung:</strong> Warnung + Fallback zu Gesamtstatistiken</p>
                    <p><strong>Verhalten:</strong> Graceful Degradation</p>
                    <div class="alert alert-warning">
                        Warnung: Unbekannte Wildart "Unbekannt". Zeige Gesamtstatistiken.
                    </div>
                </div>
            </div>
        </div>

        <!-- Test 6: Ungültige Meldegruppe -->
        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5>Test 6: Ungültige Meldegruppe</h5>
                    <code>[abschuss_summary meldegruppe="Unbekannt"]</code>
                </div>
                <div class="card-body">
                    <p><strong>Erwartung:</strong> Warnung + Fallback zu Gesamtstatistiken</p>
                    <p><strong>Verhalten:</strong> Graceful Degradation</p>
                    <div class="alert alert-warning">
                        Warnung: Unbekannte Meldegruppe "Unbekannt". Zeige Gesamtstatistiken.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-5">
        <div class="col-12">
            <h2>Öffentlicher Zugriff Test</h2>
            <div class="alert alert-success">
                <h4>✅ Wichtig: Unangemeldete Benutzer</h4>
                <p>Alle oben getesteten Shortcode-Varianten sollen für <strong>unangemeldete Benutzer</strong> zugänglich sein (öffentliche Statistiken).</p>
                <p>Es sollten <strong>keine Authentifizierungs-Checks</strong> mehr vorhanden sein.</p>
            </div>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col-12">
            <h2>Parameter-Kombinationen Übersicht</h2>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Shortcode</th>
                        <th>Species</th>
                        <th>Meldegruppe</th>
                        <th>Verhalten</th>
                        <th>Anzeige</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>[abschuss_summary]</code></td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>Hegegemeinschafts-Gesamt</td>
                        <td>Alle Wildarten + Meldegruppen aggregiert</td>
                    </tr>
                    <tr>
                        <td><code>[abschuss_summary species="Rotwild"]</code></td>
                        <td>✅</td>
                        <td>❌</td>
                        <td>Wildart-spezifisch</td>
                        <td>Nur Rotwild (alle Meldegruppen)</td>
                    </tr>
                    <tr>
                        <td><code>[abschuss_summary meldegruppe="Gruppe_A"]</code></td>
                        <td>❌</td>
                        <td>✅</td>
                        <td>Meldegruppen-spezifisch</td>
                        <td>Nur Gruppe_A (alle Wildarten)</td>
                    </tr>
                    <tr>
                        <td><code>[abschuss_summary species="Rotwild" meldegruppe="Gruppe_A"]</code></td>
                        <td>✅</td>
                        <td>✅</td>
                        <td>Spezifische Kombination</td>
                        <td>Nur Rotwild + Gruppe_A</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="row mt-3">
        <div class="col-12">
            <h2>Implementierungsdetails</h2>
            <div class="accordion" id="implementationDetails">
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDatabase">
                            Database Handler Methoden
                        </button>
                    </h2>
                    <div id="collapseDatabase" class="accordion-collapse collapse show">
                        <div class="accordion-body">
                            <h5>Neue Methoden in class-database-handler.php:</h5>
                            <ul>
                                <li><strong>get_public_summary_data($species, $meldegruppe):</strong> Hauptmethode für öffentliche Summary-Daten</li>
                                <li><strong>get_all_meldegruppen():</strong> Validierung verfügbarer Meldegruppen</li>
                                <li><strong>get_total_summary_data($species_list):</strong> Hegegemeinschafts-Gesamtstatistiken</li>
                                <li><strong>get_species_summary_data($species):</strong> Species-spezifische Daten</li>
                                <li><strong>get_meldegruppe_summary_data($meldegruppe, $species_list):</strong> Meldegruppen-spezifische Aggregation</li>
                                <li><strong>get_specific_summary_data($species, $meldegruppe):</strong> Spezifische Kombination</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFormHandler">
                            Form Handler Änderungen
                        </button>
                    </h2>
                    <div id="collapseFormHandler" class="accordion-collapse collapse">
                        <div class="accordion-body">
                            <h5>Änderungen in render_summary():</h5>
                            <ul>
                                <li><strong>Flexible Parameter:</strong> Beide Parameter sind jetzt optional</li>
                                <li><strong>Validation:</strong> Ungültige Parameter führen zu Warnungen</li>
                                <li><strong>Graceful Fallback:</strong> Bei Ungültigkeit → Gesamtstatistiken</li>
                                <li><strong>Öffentlicher Zugriff:</strong> Keine Authentifizierungs-Checks mehr</li>
                                <li><strong>Error Handling:</strong> Warnmeldungen ohne Fehlerbruch</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTemplate">
                            Template Änderungen
                        </button>
                    </h2>
                    <div id="collapseTemplate" class="accordion-collapse collapse">
                        <div class="accordion-body">
                            <h5>Änderungen in summary-template.php:</h5>
                            <ul>
                                <li><strong>Dropdown entfernt:</strong> Meldegruppen-Dropdown komplett entfernt</li>
                                <li><strong>JavaScript entfernt:</strong> Dropdown-bezogenes JavaScript entfernt</li>
                                <li><strong>Warnung hinzugefügt:</strong> Anzeige für ungültige Parameter</li>
                                <li><strong>Saubere Struktur:</strong> Nur noch Kern-Funktionalität</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
